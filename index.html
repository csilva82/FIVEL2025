<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feira FIVEL 2025 - 3D Interativa</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden; background: #000; cursor: default; }
canvas { display: block; cursor: crosshair; }
body.modal-open canvas { cursor: default; }
#ui-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
#controls-info { position: absolute; top: 20px; left: 20px; background: rgba(0, 0, 0, 0.8); color: white; padding: 20px; border-radius: 10px; font-size: 14px; line-height: 1.6; max-width: 300px; backdrop-filter: blur(10px); }
#controls-info h3 { margin-bottom: 10px; color: #4CAF50; }
#controls-info kbd { background: #333; padding: 3px 8px; border-radius: 4px; font-family: monospace; font-size: 12px; border: 1px solid #555; }
#crosshair { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 20px; height: 20px; pointer-events: none; }
#crosshair::before, #crosshair::after { content: ''; position: absolute; background: rgba(255, 255, 255, 0.8); }
#crosshair::before { top: 50%; left: 0; width: 100%; height: 2px; transform: translateY(-50%); }
#crosshair::after { left: 50%; top: 0; width: 2px; height: 100%; transform: translateX(-50%); }
#hover-info { position: absolute; bottom: 100px; left: 50%; transform: translateX(-50%); background: rgba(76, 175, 80, 0.95); color: white; padding: 15px 30px; border-radius: 25px; font-size: 18px; font-weight: bold; opacity: 0; transition: opacity 0.3s; pointer-events: none; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4); }
#hover-info.visible { opacity: 1; }
#minimap { position: absolute; top: 20px; right: 20px; width: 300px; height: 200px; background: rgba(0, 0, 0, 0.9); border: 3px solid #4CAF50; border-radius: 10px; pointer-events: all; cursor: pointer; backdrop-filter: blur(10px); }
#minimap-title { position: absolute; top: 8px; left: 50%; transform: translateX(-50%); color: #4CAF50; font-size: 13px; font-weight: bold; pointer-events: none; z-index: 10; }
#loading { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 24px; background: rgba(0, 0, 0, 0.9); padding: 30px 50px; border-radius: 15px; text-align: center; }
.hidden { display: none !important; }
#instructions { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.95); color: white; padding: 40px; border-radius: 15px; text-align: center; max-width: 500px; pointer-events: all; }
#instructions h2 { color: #4CAF50; margin-bottom: 20px; }
#instructions button { background: #4CAF50; color: white; border: none; padding: 15px 40px; font-size: 18px; border-radius: 25px; cursor: pointer; margin-top: 20px; transition: background 0.3s; }
#instructions button:hover { background: #45a049; }
#custom-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); display: flex; align-items: center; justify-content: center; pointer-events: all; z-index: 1000; }
#modal-content { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px; border-radius: 20px; text-align: center; max-width: 500px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); animation: modalSlideIn 0.3s ease-out; }
@keyframes modalSlideIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
#modal-content h3 { color: white; font-size: 24px; margin-bottom: 15px; }
#modal-content p { color: rgba(255, 255, 255, 0.9); font-size: 16px; margin-bottom: 10px; }
#modal-content .url-display { background: rgba(0, 0, 0, 0.3); padding: 10px; border-radius: 8px; color: #fff; font-family: monospace; font-size: 14px; margin: 20px 0; word-break: break-all; }
#modal-buttons { display: flex; gap: 15px; justify-content: center; margin-top: 25px; }
#modal-buttons button { padding: 12px 30px; font-size: 16px; border: none; border-radius: 25px; cursor: pointer; font-weight: bold; transition: all 0.3s; text-transform: uppercase; letter-spacing: 1px; }
#modal-visit { background: #4CAF50; color: white; }
#modal-visit:hover { background: #45a049; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4); }
#modal-cancel { background: rgba(255, 255, 255, 0.2); color: white; }
#modal-cancel:hover { background: rgba(255, 255, 255, 0.3); transform: translateY(-2px); }

/* ================= BOT√ïES M√ìVEL ================= */
#mobile-controls {
  position: absolute;
  bottom: 20px;
  left: 20px;
  display: flex;
  flex-wrap: wrap;
  width: 120px;
  height: 120px;
  gap: 10px;
  pointer-events: all;
  z-index: 100;
}
#mobile-controls button {
  flex: 1 1 40px;
  background: rgba(76, 175, 80, 0.5);
  border: none;
  color: white;
  font-size: 20px;
  border-radius: 10px;
  opacity: 0.8;
  transition: opacity 0.2s;
}
#mobile-controls button:active { opacity: 1; }
</style>
</head>
<body>
<div id="loading">Carregando Feira FIVEL 2025...</div>
<div id="instructions">
  <h2>üé™ Bem-vindo √† FIVEL 2025!</h2>
  <p style="margin: 20px 0;">Navegue pela feira virtual e clique nos estandes para visitar os sites dos expositores.</p>
  <p style="font-size: 14px; color: #ccc;">Use WASD ou setas para se mover, mouse ou toque para olhar ao redor.</p>
  <button id="start-btn">Entrar na Feira</button>
</div>
<div id="ui-overlay">
  <div id="controls-info">
    <h3>‚å®Ô∏è Controles</h3>
    <div><kbd>W</kbd> <kbd>A</kbd> <kbd>S</kbd> <kbd>D</kbd> - Mover</div>
    <div><kbd>‚Üë</kbd> <kbd>‚Üê</kbd> <kbd>‚Üì</kbd> <kbd>‚Üí</kbd> - Mover</div>
    <div><kbd>Mouse / Touch</kbd> - Olhar</div>
    <div><kbd>Click / Tap</kbd> - Interagir</div>
    <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #333;"><kbd>ESC</kbd> - Sair da feira</div>
  </div>
  <div id="crosshair"></div>
  <div id="hover-info">üñ±Ô∏è Clique no estande</div>
  <div id="minimap">
    <div id="minimap-title">Mini Mapa da Feira</div>
  </div>
</div>

<!-- BOT√ïES FIXOS PARA M√ìVEL -->
<div id="mobile-controls">
  <button id="up">‚Üë</button>
  <button id="left">‚Üê</button>
  <button id="down">‚Üì</button>
  <button id="right">‚Üí</button>
</div>

<div id="custom-modal" class="hidden">
  <div id="modal-content">
    <h3 id="modal-label">Estande</h3>
    <p>Visite o site:</p>
    <div class="url-display" id="modal-url">https://example.com</div>
    <div id="modal-buttons">
      <button id="modal-visit">Visitar</button>
      <button id="modal-cancel">Cancelar</button>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<script>
let scene, camera, renderer, controls;
let keys = { w: false, a: false, s: false, d: false };
let velocity = 0.1;
let euler = new THREE.Euler(0, 0, 0, 'YXZ');
let hoveredObject = null;

function init() {
    scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000);

    camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0, 2, 5);

    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Luz
    const light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.set(10, 20, 10);
    scene.add(light);

    // Ch√£o
    const floorGeometry = new THREE.PlaneGeometry(100, 100);
    const floorMaterial = new THREE.MeshStandardMaterial({ color: 0x222222 });
    const floor = new THREE.Mesh(floorGeometry, floorMaterial);
    floor.rotation.x = -Math.PI/2;
    scene.add(floor);

    // Estandes exemplo
    const boxGeo = new THREE.BoxGeometry(2, 2, 2);
    const boxMat = new THREE.MeshStandardMaterial({ color: 0x4CAF50 });
    for(let i=-4; i<=4; i+=4){
        for(let j=-4; j<=4; j+=4){
            const box = new THREE.Mesh(boxGeo, boxMat.clone());
            box.position.set(i, 1, j);
            box.userData = { label: `Estande ${i+5},${j+5}`, url: 'https://example.com' };
            scene.add(box);
        }
    }

    window.addEventListener('resize', onWindowResize);
    document.addEventListener('keydown', (e)=>{ if(e.key.toLowerCase()=='w') keys.w=true; if(e.key.toLowerCase()=='a') keys.a=true; if(e.key.toLowerCase()=='s') keys.s=true; if(e.key.toLowerCase()=='d') keys.d=true; });
    document.addEventListener('keyup', (e)=>{ if(e.key.toLowerCase()=='w') keys.w=false; if(e.key.toLowerCase()=='a') keys.a=false; if(e.key.toLowerCase()=='s') keys.s=false; if(e.key.toLowerCase()=='d') keys.d=false; });

    // Touch move
    let touchStartX=0, touchStartY=0;
    document.addEventListener('touchstart', (e)=>{
        if(e.touches.length==1){ touchStartX=e.touches[0].clientX; touchStartY=e.touches[0].clientY; }
    });
    document.addEventListener('touchmove', (e)=>{
        if(e.touches.length==1){
            const deltaX = e.touches[0].clientX - touchStartX;
            const deltaY = e.touches[0].clientY - touchStartY;
            euler.setFromQuaternion(camera.quaternion);
            euler.y -= deltaX * 0.005;
            euler.x -= deltaY * 0.005;
            euler.x = Math.max(-Math.PI/2, Math.min(Math.PI/2, euler.x));
            camera.quaternion.setFromEuler(euler);
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        }
    });

    // Bot√µes m√≥veis
    document.getElementById('up').addEventListener('touchstart',()=>keys.w=true);
    document.getElementById('up').addEventListener('touchend',()=>keys.w=false);
    document.getElementById('down').addEventListener('touchstart',()=>keys.s=true);
    document.getElementById('down').addEventListener('touchend',()=>keys.s=false);
    document.getElementById('left').addEventListener('touchstart',()=>keys.a=true);
    document.getElementById('left').addEventListener('touchend',()=>keys.a=false);
    document.getElementById('right').addEventListener('touchstart',()=>keys.d=true);
    document.getElementById('right').addEventListener('touchend',()=>keys.d=false);

    animate();
}

function onWindowResize() {
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
}

function animate() {
    requestAnimationFrame(animate);

    // Movimento
    let forward = new THREE.Vector3();
    camera.getWorldDirection(forward);
    forward.y = 0;
    forward.normalize();
    let right = new THREE.Vector3();
    right.crossVectors(camera.up, forward).normalize();

    if(keys.w) camera.position.add(forward.clone().multiplyScalar(velocity));
    if(keys.s) camera.position.add(forward.clone().multiplyScalar(-velocity));
    if(keys.a) camera.position.add(right.clone().multiplyScalar(velocity));
    if(keys.d) camera.position.add(right.clone().multiplyScalar(-velocity));

    renderer.render(scene, camera);
}

// Modal clique estande
document.addEventListener('click', ()=>{
    if(hoveredObject && hoveredObject.userData.url){
        const modal = document.getElementById('custom-modal');
        document.getElementById('modal-label').innerText = hoveredObject.userData.label;
        document.getElementById('modal-url').innerText = hoveredObject.userData.url;
        modal.classList.remove('hidden');
    }
});

document.getElementById('modal-cancel').addEventListener('click', ()=>document.getElementById('custom-modal').classList.add('hidden'));
document.getElementById('modal-visit').addEventListener('click', ()=>{
    const url = document.getElementById('modal-url').innerText;
    window.open(url, '_blank');
    document.getElementById('custom-modal').classList.add('hidden');
});

// Start button
document.getElementById('start-btn').addEventListener('click', ()=>{
    document.getElementById('instructions').classList.add('hidden');
    document.getElementById('loading').classList.add('hidden');
    init();
});
</script>
</body>
</html>
